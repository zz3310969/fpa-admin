import BasicLayout from '../layouts/BasicLayout';
import UserLayout from '../layouts/UserLayout';

import BlankLayout from '../layouts/BlankLayout';

import Analysis from '../routes/Dashboard/Analysis';
import Monitor from '../routes/Dashboard/Monitor';
import Workplace from '../routes/Dashboard/Workplace';

import CardTestResultList from '../routes/Fpa/CardTestResult/CardTestResultList';
import CardTestResultProfile from '../routes/Fpa/CardTestResult/CardTestResultProfile';


import CounselorRankList from '../routes/Fpa/CounselorRank/CounselorRankList';
import CounselorRankAddForm from '../routes/Fpa/CounselorRank/CounselorRankAddForm';
import CounselorRankEditForm from '../routes/Fpa/CounselorRank/CounselorRankEditForm';

import CounselorList from '../routes/Fpa/Counselor/CounselorList';
import CounselorAddForm from '../routes/Fpa/Counselor/CounselorAddForm';
import CounselorEditForm from '../routes/Fpa/Counselor/CounselorEditForm';


import WithdrawList from '../routes/Fpa/Withdraw/WithdrawList';
import WithdrawAddForm from '../routes/Fpa/Withdraw/WithdrawAddForm';
import WithdrawEditForm from '../routes/Fpa/Withdraw/WithdrawEditForm';

import RefundList from '../routes/Fpa/Refund/RefundList';
import RefundAddForm from '../routes/Fpa/Refund/RefundAddForm';
import RefundEditForm from '../routes/Fpa/Refund/RefundEditForm';


import ServiceRecordList from '../routes/Fpa/ServiceRecord/ServiceRecordList';

import AccountList from '../routes/Fpa/Account/AccountList';
import AccountAddForm from '../routes/Fpa/Account/AccountAddForm';
import AccountEditForm from '../routes/Fpa/Account/AccountEditForm';


import CardGroupList from '../routes/Fpa/CardGroup/CardGroupList';
import CardGroupAddForm from '../routes/Fpa/CardGroup/CardGroupAddForm';

import ShareList from '../routes/Fpa/Share/ShareList';


import TransmitTemplateList from '../routes/Fpa/TransmitTemplate/TransmitTemplateList';
import TransmitTemplateAddForm from '../routes/Fpa/TransmitTemplate/TransmitTemplateAddForm';
import TransmitTemplateEditForm from '../routes/Fpa/TransmitTemplate/TransmitTemplateEditForm';

import CharacterColorList from '../routes/Fpa/Charactercolor/CharacterColorList';
import CharacterColorAddForm from '../routes/Fpa/Charactercolor/CharacterColorAddForm';
import CharacterColorEditForm from '../routes/Fpa/Charactercolor/CharacterColorEditForm';

import CustomerWordsList from '../routes/Fpa/CustomerWords/CustomerWordsList';
import CustomerWordsEditForm from '../routes/Fpa/CustomerWords/CustomerWordsEditForm';


import ThemeList from '../routes/Fpa/Theme/ThemeList';
import ThemeAddForm from '../routes/Fpa/Theme/ThemeAddForm';
import ThemeEditForm from '../routes/Fpa/Theme/ThemeEditForm';

import SceneList from '../routes/Fpa/Scene/SceneList';
import SceneAddForm from '../routes/Fpa/Scene/SceneAddForm';
import SceneEditForm from '../routes/Fpa/Scene/SceneEditForm';

import CharacterList from '../routes/Fpa/Character/CharacterList';
import CharacterAddForm from '../routes/Fpa/Character/CharacterAddForm';
import CharacterEditForm from '../routes/Fpa/Character/CharacterEditForm';

import CardUnitList from '../routes/Fpa/CardUnit/CardUnitList';
import CardUnitAddForm from '../routes/Fpa/CardUnit/CardUnitAddForm';
import CardUnitEditForm from '../routes/Fpa/CardUnit/CardUnitEditForm';

import CustomerList from '../routes/Fpa/Customer/CustomerList';
import CustomerAddForm from '../routes/Fpa/Customer/CustomerAddForm';
import CustomerEditForm from '../routes/Fpa/Customer/CustomerEditForm';

import OrderList from '../routes/Fpa/Order/OrderList';
import OrderAddForm from '../routes/Fpa/Order/OrderAddForm';
import OrderEditForm from '../routes/Fpa/Order/OrderEditForm';
import OrderProfile from '../routes/Fpa/Order/OrderProfile';


import UserList from '../routes/Base/User/UserList';
import UserAddForm from '../routes/Base/User/UserAddForm';
import UserEditForm from '../routes/Base/User/UserEditForm';

import DictionaryTree from '../routes/Base/Dictionary/DictionaryTree';
import ResourceTree from '../routes/Base/Resource/ResourceTree';
import OrganizationTree from '../routes/Base/Organization/OrganizationTree';
import MenuTree from '../routes/Base/Menu/MenuTree';


import CacheList from '../routes/Base/Cache/CacheList';
import TableList from '../routes/List/TableList';
import CoverCardList from '../routes/List/CoverCardList';
import CardList from '../routes/List/CardList';
import FilterCardList from '../routes/List/FilterCardList';
import SearchList from '../routes/List/SearchList';
import BasicList from '../routes/List/BasicList';

import BasicProfile from '../routes/Profile/BasicProfile';
import AdvancedProfile from '../routes/Profile/AdvancedProfile';

import BasicForm from '../routes/Forms/BasicForm';
import AdvancedForm from '../routes/Forms/AdvancedForm';
import StepForm from '../routes/Forms/StepForm';
import Step2 from '../routes/Forms/StepForm/Step2';
import Step3 from '../routes/Forms/StepForm/Step3';

import Exception403 from '../routes/Exception/403';
import Exception404 from '../routes/Exception/404';
import Exception500 from '../routes/Exception/500';

import Success from '../routes/Result/Success';
import Error from '../routes/Result/Error';

import Login from '../routes/User/Login';
import Register from '../routes/User/Register';
import RegisterResult from '../routes/User/RegisterResult';


import ApplicationList from '../routes/Advisory/Application/ApplicationList';
import ApplicationAddForm from '../routes/Advisory/Application/ApplicationAddForm';
import ApplicationEditForm from '../routes/Advisory/Application/ApplicationEditForm';

import ApplicationUserList from '../routes/Advisory/ApplicationUser/ApplicationUserList';
import ApplicationUserAddForm from '../routes/Advisory/ApplicationUser/ApplicationUserAddForm';
import ApplicationUserEditForm from '../routes/Advisory/ApplicationUser/ApplicationUserEditForm';


import ConsultantList from '../routes/Advisory/Consultant/ConsultantList';
import ConsultantAddForm from '../routes/Advisory/Consultant/ConsultantAddForm';
import ConsultantEditForm from '../routes/Advisory/Consultant/ConsultantEditForm';

import QuickReplyList from '../routes/Advisory/QuickReply/QuickReplyList';
import QuickReplyAddForm from '../routes/Advisory/QuickReply/QuickReplyAddForm';
import QuickReplyEditForm from '../routes/Advisory/QuickReply/QuickReplyEditForm';

import LevelList from '../routes/Advisory/Level/LevelList';
import LevelAddForm from '../routes/Advisory/Level/LevelAddForm';
import LevelEditForm from '../routes/Advisory/Level/LevelEditForm';

import CommissionPricingList from '../routes/Advisory/CommissionPricing/CommissionPricingList';
import CommissionPricingAddForm from '../routes/Advisory/CommissionPricing/CommissionPricingAddForm';
import CommissionPricingEditForm from '../routes/Advisory/CommissionPricing/CommissionPricingEditForm';

import CommentItemsList from '../routes/Advisory/CommentItems/CommentItemsList';
import CommentItemsAddForm from '../routes/Advisory/CommentItems/CommentItemsAddForm';
import CommentItemsEditForm from '../routes/Advisory/CommentItems/CommentItemsEditForm';

import CommentRecordList from '../routes/Advisory/CommentRecord/CommentRecordList';
import CommentRecordAddForm from '../routes/Advisory/CommentRecord/CommentRecordAddForm';
import CommentRecordEditForm from '../routes/Advisory/CommentRecord/CommentRecordEditForm';

import CommentTemplateList from '../routes/Advisory/Commenttemplate/CommentTemplateList';
import CommentTemplateAddForm from '../routes/Advisory/Commenttemplate/CommentTemplateAddForm';
import CommentTemplateEditForm from '../routes/Advisory/Commenttemplate/CommentTemplateEditForm';

import AdvisoryOrderList from '../routes/Advisory/AdvisoryOrder/AdvisoryOrderList';
import AdvisoryOrderAddForm from '../routes/Advisory/AdvisoryOrder/AdvisoryOrderAddForm';
import AdvisoryOrderEditForm from '../routes/Advisory/AdvisoryOrder/AdvisoryOrderEditForm';

import AdvisoryProductList from '../routes/Advisory/AdvisoryProduct/AdvisoryProductList';
import AdvisoryProductAddForm from '../routes/Advisory/AdvisoryProduct/AdvisoryProductAddForm';
import AdvisoryProductEditForm from '../routes/Advisory/AdvisoryProduct/AdvisoryProductEditForm';

import AdvisoryPricingList from '../routes/Advisory/AdvisoryPricing/AdvisoryPricingList';
import AdvisoryPricingAddForm from '../routes/Advisory/AdvisoryPricing/AdvisoryPricingAddForm';
import AdvisoryPricingEditForm from '../routes/Advisory/AdvisoryPricing/AdvisoryPricingEditForm';

import AdvisoryModesList from '../routes/Advisory/AdvisoryModes/AdvisoryModesList';
import AdvisoryModesAddForm from '../routes/Advisory/AdvisoryModes/AdvisoryModesAddForm';
import AdvisoryModesEditForm from '../routes/Advisory/AdvisoryModes/AdvisoryModesEditForm';

import AdvisoryThemeList from '../routes/Advisory/AdvisoryTheme/AdvisoryThemeList';
import AdvisoryThemeAddForm from '../routes/Advisory/AdvisoryTheme/AdvisoryThemeAddForm';
import AdvisoryThemeEditForm from '../routes/Advisory/AdvisoryTheme/AdvisoryThemeEditForm';

import Home from '../routes/Home';


import dynamic from 'dva/dynamic';

import ChatIndex from '../routes/Fpa/Chat/Index';
import { getAuthority } from '../utils/authority';

// wrapper of dynamic
const dynamicWrapper = (app, models, component) => dynamic({
  app,
  models: () => models.map(m => import(`../models/${m}.js`)),
  component,
});

const data = [{
  component: BasicLayout,
  layout: 'BasicLayout',
  name: '首页', // for breadcrumb
  path: '',
  children: [{
    name: '在线咨询',
    path: 'advisory',
    icon: 'solution',
    children: [{
      name: '在线咨询服务台',
      path: 'chat',
      component: ChatIndex,
      target: '_blank'
    }, {
      name: '接入系统管理',
      path: 'application',
      component: ApplicationList,
      authority: ['ROLE_1450'],
      children: [{
        breadname: '添加接入系统',
        path: 'add',
        component: ApplicationAddForm,
      }, {
        breadname: '编辑接入系统',
        path: 'edit/:id',
        component: ApplicationEditForm,
      }]
    }, {
      name: '接入系统用户管理',
      path: 'applicationuser',
      component: ApplicationUserList,
      authority: ['ROLE_1450'],
      children: [{
        breadname: '添加接入系统用户',
        path: 'add',
        component: ApplicationUserAddForm,
      }, {
        breadname: '编辑接入系统用户',
        path: 'edit/:id',
        component: ApplicationUserEditForm,
      }]
    }, {
      name: '咨询师等级管理',
      path: 'level',
      component: LevelList,
      authority: ['ROLE_1450'],
      children: [{
        breadname: '添加咨询师等级',
        path: 'add',
        component: LevelAddForm,
      }, {
        breadname: '编辑咨询师等级',
        path: 'edit/:id',
        component: LevelEditForm,
      }]
    }, {
      name: '咨询服务主题管理',
      path: 'advisorytheme',
      component: AdvisoryThemeList,
      authority: ['ROLE_1450'],
      children: [{
        breadname: '添加咨询服务主题',
        path: 'add',
        component: AdvisoryThemeAddForm,
      }, {
        breadname: '编辑咨询服务主题',
        path: 'edit/:id',
        component: AdvisoryThemeEditForm,
      }]
    }, {
      name: '咨询服务模式管理',
      path: 'advisorymodes',
      component: AdvisoryModesList,
      authority: ['ROLE_1450'],
      children: [{
        breadname: '添加咨询服务模式',
        path: 'add',
        component: AdvisoryModesAddForm,
      }, {
        breadname: '编辑咨询服务模式',
        path: 'edit/:id',
        component: AdvisoryModesEditForm,
      }]
    }, {
      name: '咨询师管理',
      path: 'consultant',
      component: ConsultantList,
      children: [{
        breadname: '添加咨询师',
        path: 'add',
        component: ConsultantAddForm,
      }, {
        breadname: '编辑咨询师信息',
        path: 'edit/:id',
        component: ConsultantEditForm,
      }]
    }, {
      name: '服务产品管理',
      path: 'advisoryProduct',
      authority: ['ROLE_1450'],
      component: AdvisoryProductList,
      children: [{
        breadname: '新增',
        path: 'add',
        component: AdvisoryProductAddForm,
      }, {
        breadname: '编辑',
        path: 'edit/:id',
        component: AdvisoryProductEditForm,
      }]
    },
     {
     name: '知识管理',
     path: 'quickreply',
     component: QuickReplyList,
     authority: ['ROLE_1450'],
     children: [{
       breadname: '添加知识',
       path: 'add',
       component: QuickReplyAddForm,
     }, {
       breadname: '编辑知识',
       path: 'edit/:id',
       component: QuickReplyEditForm,
     }]
   },
    //   {
    //   name: '咨询定价',
    //   path: 'advisorypricing',
    //   component: AdvisoryPricingList,
    //   children: [{
    //     breadname: '新增',
    //     path: 'add/:id',
    //     component: AdvisoryPricingAddForm,
    //   }, {
    //     breadname: '编辑',
    //     path: 'edit/:id',
    //     component: AdvisoryPricingEditForm,
    //   }]
    // },
      {
      name: '佣金定价',
      path: 'commissionpricing',
      authority: ['ROLE_1450'],
      component: CommissionPricingList,
      children: [{
        breadname: '新增',
        path: 'add/:id',
        component: CommissionPricingAddForm,
      }, {
        breadname: '编辑',
        path: 'edit/:id',
        component: CommissionPricingEditForm,
      }]
    }, {
      name: '评价模版管理',
      path: 'commenttemplate',
      authority: ['ROLE_1450'],
      component: CommentTemplateList,
      children: [{
        breadname: '新增',
        path: 'add',
        component: CommentTemplateAddForm,
      }, {
        breadname: '编辑',
        path: 'edit/:id',
        component: CommentTemplateEditForm,
      }]
    }, {
      name: '评价项管理',
      path: 'commentitems',
      authority: ['ROLE_1450'],
      component: CommentItemsList,
      children: [{
        breadname: '新增',
        path: 'add',
        component: CommentItemsAddForm,
      }, {
        breadname: '编辑',
        path: 'edit/:id',
        component: CommentItemsEditForm,
      }]
    }, {
      name: '评价记录',
      path: 'commentrecord',
      authority: ['ROLE_1450'],
      component: CommentRecordList,
      children: [{
        breadname: '新增',
        path: 'add',
        component: CommentRecordAddForm,
      }, {
        breadname: '编辑',
        path: 'edit/:id',
        component: CommentRecordEditForm,
      }]
    }, {
      name: '咨询订单管理',
      path: 'advisoryOrder',
      authority: ['ROLE_1450'],
      component: AdvisoryOrderList,
      children: [{
        breadname: '新增',
        path: 'add',
        component: AdvisoryOrderAddForm,
      }, {
        breadname: '编辑',
        path: 'edit/:id',
        component: AdvisoryOrderEditForm,
      }]
    }],
  }, {
    name: '卡牌测试管理',
    path: 'test',
    icon: 'credit-card',
    authority: ['ROLE_1450'],
    children: [{
      name: '测试场景',
      path: 'scene',
      authority: ['ROLE_1450'],
      component: SceneList,
    }, {
      name: '卡牌管理',
      path: 'cardgroup',
      authority: ['ROLE_1450'],
      component: CardGroupList,
      children: [{
        breadname: '新增',
        path: 'add',
        component: CardGroupAddForm,
      }]
    }, {
      name: '测试结果',
      path: 'result',
      component: CardTestResultList,
      authority: ['ROLE_1450'],
      children: [{
        breadname: '详情',
        path: 'profile/:id',
        component: CardTestResultProfile,
      },],
    },],
  }, {
    name: '性格管理',
    path: 'character',
    icon: 'pie-chart',
    authority: ['ROLE_1450'],
    children: [{
      name: '性格色彩列表',
      path: 'color',
      component: CharacterColorList,
      children: [{
        breadname: '新增',
        path: 'add',
        component: CharacterColorAddForm,
      }, {
        breadname: '编辑',
        path: 'edit/:id',
        component: CharacterColorEditForm,
      },],
    }, {
      name: '主题列表',
      path: 'theme',
      component: ThemeList,
      children: [{
        breadname: '新增',
        path: 'add',
        component: ThemeAddForm,
      }, {
        breadname: '编辑',
        path: 'edit/:id',
        component: ThemeEditForm,
      },],
    }, {
      name: '性格主题配置',
      path: 'charactertheme',
      component: CharacterList,
      children: [{
        breadname: '新增',
        path: 'add',
        component: CharacterAddForm,
      }, {
        breadname: '编辑',
        path: 'edit/:id',
        component: CharacterEditForm,
      },],
    },],
  }, {
    name: '客户管理',
    path: 'customer',
    icon: 'team',
    authority: ['ROLE_1450'],
    children: [{
      name: '客户资料',
      path: 'info',
      component: CustomerList,
    }, {
      name: '客户订单',
      path: 'order',
      component: OrderList,
      children: [{
        breadname: '详情',
        path: 'profile/:id',
        component: OrderProfile,
      },],
    },],
  }, {
    name: '营销管理',
    path: 'scheme',
    icon: 'notification',
    authority: ['ROLE_1450'],
    children: [{
      name: '分享记录',
      path: 'share',
      component: ShareList,
    }, {
      name: '分享模板管理',
      path: 'transmittemplate',
      component: TransmitTemplateList,
      children: [{
        breadname: '新增',
        path: 'add',
        component: TransmitTemplateAddForm,
      }, {
        breadname: '编辑',
        path: 'edit/:id',
        component: TransmitTemplateEditForm,
      },],
    },],
  }, {
    name: '咨询师服务管理',
    path: 'counsel',
    icon: 'customer-service',
    authority: ['ROLE_1450'],
    children: [{
      name: '咨询师等级管理',
      path: 'rank',
      component: CounselorRankList,
      children: [{
        breadname: '新增',
        path: 'add',
        component: CounselorRankAddForm,
      }, {
        breadname: '编辑',
        path: 'edit/:id',
        component: CounselorRankEditForm,
      },],
    }, {
      name: '咨询师管理',
      path: 'counselor',
      component: CounselorList,
      children: [{
        breadname: '新增',
        path: 'add',
        component: CounselorAddForm,
      }, {
        breadname: '编辑',
        path: 'edit/:id',
        component: CounselorEditForm,
      },],
    }, {
      name: '客户留言管理',
      path: 'words',
      component: CustomerWordsList,
      children: [{
        breadname: '编辑',
        path: 'edit/:id',
        component: CustomerWordsEditForm,
      },],
    },],
  }, /*{
    name: '财务',
    path: 'finance',
    icon: 'pay-circle',
    authority: ['ROLE_1450'],
    children: [{
      name: '咨询师账户管理',
      path: 'account',
      component: AccountList,
      children: [{
        breadname: '编辑',
        path: 'edit/:id',
        component: AccountEditForm,
      }],
    }, {
      name: '提现申请',
      path: 'withdraw/apply',
      component: WithdrawList,
      children: [{
        breadname: '新增',
        path: 'add',
        component: WithdrawAddForm,
      }, {
        breadname: '编辑',
        path: 'edit/:id',
        component: WithdrawEditForm,
      }],
    }, {
      name: '提现审核',
      path: 'withdraw/audit',
      component: WithdrawList,
      children: [{
        breadname: '编辑',
        path: 'edit/:id',
        component: WithdrawEditForm,
      }],
    }, {
      name: '提现记录',
      path: 'withdraw/list',
      component: WithdrawList,
      children: [{
        breadname: '编辑',
        path: 'edit/:id',
        component: WithdrawEditForm,
      }],
    }, {
      name: '退款申请',
      path: 'refund/apply',
      component: RefundList,
      children: [{
        breadname: '新增',
        path: 'add',
        component: RefundAddForm,
      }, {
        breadname: '编辑',
        path: 'edit/:id',
        component: RefundEditForm,
      }],
    }, {
      name: '退款审核',
      path: 'refund/audit',
      component: RefundList,
      children: [{
        breadname: '编辑',
        path: 'edit/:id',
        component: RefundEditForm,
      }],
    }, {
      name: '退款记录',
      path: 'refund/list',
      component: RefundList,
      children: [{
        breadname: '编辑',
        path: 'edit/:id',
        component: RefundEditForm,
      }],
    },],
  },*//* {
    name: '系统管理',
    path: 'sysm',
    icon: 'windows-o',
    authority: ['ROLE_1450'],
    children: [{
      name: '缓存列表',
      path: 'cache-list',
      component: CacheList,
    }, {
      name: '菜单',
      path: 'menu-tree',
      component: MenuTree,
    }, {
      name: '字典',
      path: 'dictionary-tree',
      component: DictionaryTree,
    }, {
      name: '资源',
      path: 'resource-tree',
      component: ResourceTree,
    }, {
      name: '组织架构',
      path: 'org-tree',
      component: OrganizationTree,
    }, {
      name: '用户列表',
      path: 'user-list',
      component: UserList,
      children: [{
        breadname: '新增',
        path: 'add',
        component: UserAddForm,
      }]
    }],
  },*/ /*{
    name: 'Dashboard',
    icon: 'dashboard',
    path: 'dashboard',
    children: [{
      name: '分析页',
      path: 'analysis',
      component: Analysis,
    // }, {
    //   name: '监控页',
    //   path: 'monitor',
    //   component: Monitor,
    // }, {
    //   name: '工作台',
    //   path: 'workplace',
    //   component: Workplace,
    }],
  },*/{
    name:'首页',
    icon: 'home',
    path: 'home',
    component:Home
  }],
}, {
  component: UserLayout,
  layout: 'UserLayout',
  hideInMenu: true,
  children: [{
    name: '帐户',
    icon: 'user',
    path: 'user',
    children: [{
      name: '登录',
      path: 'login',
      component: Login,
    }, {
      name: '注册',
      path: 'register',
      component: Register,
    }, {
      name: '注册结果',
      path: 'register-result',
      component: RegisterResult,
    }],
  }],
}];

function formatter(data, parentPath = '/', parentAuthority) {
  return data.map(item => {
    const result = {
      ...item,
      authority: item.authority || parentAuthority,
    };
    if (item.children) {
      result.children = formatter(item.children, `${parentPath}${item.path}/`, item.authority);
    }
    return result; 
  }).filter(menu => menu.layout !='UserLayout' ).filter(menu => !menu.authority || menu.authority.some(authority => { let wu = getAuthority().some(a => a == authority ) ;return wu} ) );
}
export function getNavData() {
  return formatter(data);
}

export default data;
